{extend name="share:layout"/}
{block name="title"}公共方法{/block}
{block name="body"}
<h4>公共方法</h4>
<textarea readonly style="width: 100%; height: 750px; font-family: &quot;Courier New&quot;; font-size: 12px; line-height: 1.5;">
//打印数组
function dd($data){
    if(empty($data)){
        echo "<pre>";
        var_dump($data);
    }
    echo "<pre>";
    print_r($data);
}
//请求返回json
function res($status = 0, $data = '',$msg = ''){
    $res = [
        'status' => config("admin.".$status)['code'],
        'msg' => config("admin.".$status)['message'],
        'data' => $data,
    ];
    if(!empty($msg)){
        $res['msg'] = $msg;
    }
    return json($res);
}
//请求返回
function returnstr($status = 0, $msg = ''){
    $data = config("admin.".$status)['message'];
    if(!empty($msg)){
        $data = $msg;
    }
    return $data;
}
//递归
function recursive_menu($list, $parent_id=0){
    $arr = array();
    foreach($list as $l){
        if($l['parent_id'] == $parent_id){
            $arr[] = $l;
            $child = recursive_menu($list, $l['menu_id']);
            if(is_array($child)){
                $arr = array_merge($arr, $child);
            }
        }
    }
    return $arr;
}
//删除数据
function delete_data($where, $table){
    if(is_array($where)){
        $res = db($table)->where($where)->delete();
        return $res;
    }
    $res = db($table)->delete($where);
    return $res;
}
//审核、更新某一个字段
function audit($table, $where, $setField){
    $data = db($table)
        ->where($where)
        ->setField($setField);
    return $data;
}
//统计
function tablecount($table, $where){
    $data = db($table)
        ->where($where)
        ->count();
    return $data;
}
</textarea>
{/block}